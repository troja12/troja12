(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],i=!0,s=1;s<o.length;s++){var c=o[s];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=o[0]))}return t}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=i,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/cms-activities/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"031d":function(t,e,o){"use strict";o("0d1f")},"0d1f":function(t,e,o){var i=o("be90");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("510e2396",i,!0,{sourceMap:!1,shadowMode:!1})},"32f1":function(t,e,o){var i=o("a2d6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("59dd0e84",i,!0,{sourceMap:!1,shadowMode:!1})},3354:function(t,e,o){var i=o("5816");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("2bb525ae",i,!0,{sourceMap:!1,shadowMode:!1})},3710:function(t,e,o){var i=o("643d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("fb54c930",i,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:{long:t.isLongImg},attrs:{id:"app"}},[t.pageLoading?o("loading"):[t.fromLowCode&&"lowcode"===t.jumpPageType&&t.lowcodePage?o("iframe",{attrs:{id:"bgFrame",frameborder:"0",src:t.lowcodePage}}):t.bgImg?o("img",{class:{long:t.isLongImg,full:!t.isLongImg},attrs:{id:"bgImg",src:t.bgImg}}):t._e(),t.isDesktop?o("desktop-web"):o("div",{staticClass:"btn-box",class:{bottom:t.placeBtnBottom,middle:!t.placeBtnBottom}},[t.isWeixin?o("wechat-web",{attrs:{appPath:t.appPath,btnImg:t.btnImg,placeBottom:t.placeBtnBottom}}):o("public-web",{attrs:{btnImg:t.btnImg,openWeapp:t.openWeapp,placeBottom:t.placeBtnBottom,btnLoading:t.btnLoading}})],1)],t.isLongImg?o("div",{staticClass:"bottom-box"}):t._e(),o("we-dialog",{attrs:{onOk:t.openWeapp,visible:t.dialogVisible,message:t.dialogMsg}})],2)},n=[],r=o("1da1"),s=(o("96cf"),o("ac1f"),o("466d"),o("5319"),o("4d63"),o("25f0"),o("99af"),o("c975"),o("d3b7"),o("ace4"),o("5cc6"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"center",attrs:{id:"wechat-web-container"}},[o("div",{class:{bottom:t.placeBottom}},[t.btnImg?o("img",{staticStyle:{width:"100%",position:"fixed",left:"0",right:"0",bottom:"0","z-index":"0"},attrs:{src:t.btnImg}}):t._e(),t.btnImg?o("wx-open-launch-weapp",{attrs:{username:t.originalID,path:t.appPath}},[o("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <div style="width: 100%; height: 3rem; z-index: 10"></div> ')])]):t.placeBottom?o("wx-open-launch-weapp",{attrs:{username:t.originalID,path:t.appPath}},[o("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <button style="width: 100%; height: 3rem; font-size: 18px; font-weight: bold; display: flex; align-items: center; justify-content: center; border: none; border-radius: 0; background-color: #07c160; color:#fff;" > 打开小程序 </button> ')])]):o("wx-open-launch-weapp",{attrs:{username:t.originalID,path:t.appPath}},[o("script",{attrs:{type:"text/wxtag-template"}},[t._v(' <button v-else style="width: 200px; height: 45px; text-align: center; font-size: 17px; font-weight: bold; display: block; margin: 0 auto; padding: 8px 24px; border: none; border-radius: 4px; background-color: #07c160; color:#fff;"> 打开小程序 </button> ')])])],1)])}),c=[],l={props:{btnImg:String,appPath:String,placeBottom:Boolean},data:function(){var t=window,e=t.cloudResource,o=void 0===e?{}:e;return{appName:o.appName||"",originalID:o.appOriginalID||""}},computed:{},mounted:function(){}},p=l,d=(o("031d"),o("2877")),u=Object(d["a"])(p,s,c,!1,null,"07f35509",null),g=u.exports,m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"center",attrs:{id:"public-web-container"}},[o("div",{class:{bottom:t.placeBottom}},[t.btnImg?[o("img",{attrs:{id:"btnImg",src:t.btnImg},on:{click:t.onOpenWeapp}})]:[o("a",{staticClass:"weui-btn weui-btn_primary weui-btn_loading",attrs:{href:"javascript:"},on:{click:t.onOpenWeapp}},[t.loading?o("span",{staticClass:"weui-primary-loading weui-primary-loading_transparent"},[o("i",{staticClass:"weui-primary-loading__dot"})]):t._e(),t._v(" 打开小程序 ")])]],2)])},f=[],b={props:{btnImg:String,loading:Boolean,openWeapp:Function,placeBottom:Boolean},data:function(){var t=window,e=t.cloudResource,o=void 0===e?{}:e;return{appName:o.appName||"",originalID:o.appOriginalID||""}},methods:{onOpenWeapp:function(){this.openWeapp()}}},h=b,w=(o("e98a"),Object(d["a"])(h,m,f,!1,null,"1894d178",null)),v=w.exports,x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"center",attrs:{id:"desktop"}},[o("p",[t._v("请在手机打开网页链接")])])}],_={},I=_,k=Object(d["a"])(I,x,y,!1,null,"36b91ec9",null),j=k.exports,P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"center",attrs:{id:"loading"}},[o("div",[o("span",{staticClass:"weui-primary-loading weui-primary-loading_brand"},[o("span",{staticClass:"weui-primary-loading__dot"})]),o("p",[t._v(" 加载中... ")])])])}],O={},S=O,D=(o("9206"),Object(d["a"])(S,P,C,!1,null,null,null)),M=D.exports,W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"js_dialog",attrs:{id:""}},[o("div",{staticClass:"weui-mask"}),o("div",{staticClass:"weui-dialog"},[o("div",{staticClass:"weui-dialog__bd"},[t._v(" "+t._s(t.message)+" ")]),o("div",{staticClass:"weui-dialog__ft",on:{click:this.onOk}},[o("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:"}},[t._v(" 我知道了 ")])])])])},B=[],E={props:{visible:Boolean,message:String,onOk:Function},name:"WeDialog"},L=E,A=(o("6a06"),Object(d["a"])(L,W,B,!1,null,"169a55ac",null)),N=A.exports,R="CMS_SMS_USER_SESSIONID_KEY",T={name:"App",components:{WechatWeb:g,PublicWeb:v,DesktopWeb:j,Loading:M,WeDialog:N},data:function(){return{isWXWork:!1,isWeixin:!1,isMobile:!1,isDesktop:!1,cloudApp:null,appPath:"",bgImg:"",btnImg:"",isLongImg:!1,pageLoading:!0,btnLoading:!1,openlink:"",dialogVisible:!1,dialogMsg:"",generateSchemaError:!1,fromLowCode:!1,jumpPageType:"image",lowcodePage:""}},computed:{placeBtnBottom:function(){return Boolean(this.bgImg||this.fromLowCode&&"lowcode"===this.jumpPageType&&this.lowcodePage)}},created:function(){var t=navigator.userAgent.toLowerCase();this.isWXWork="wxwork"==t.match(/wxwork/i),this.isWeixin=!this.isWXWork&&"micromessenger"==t.match(/micromessenger/i),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|IEMobile)/i)?this.isMobile=!0:this.isDesktop=!0,this.isDesktop?this.pageLoading=!1:this.initCloudAndGetActivityInfo()},mounted:function(){this.isWeixin&&this.initWxConfig()},methods:{initWxConfig:function(){var t=window,e=t.cloudResource,o=void 0===e?{}:e;wx.config({appId:o.appID,timestamp:0,nonceStr:"nonceStr",signature:"signature",jsApiList:["chooseImage"],openTagList:["wx-open-launch-weapp"]})},initCloudAndGetActivityInfo:function(){var t=window,e=t.cloudResource;if(e&&"{{APPID}}"!==e.appID){var o=new window.cloud.Cloud({identityless:!0,resourceAppid:e.appID,resourceEnv:e.envID});o.init(),this.cloudApp=o,this.getActivityInfo()}else this.showDialog("页面初始化信息缺失")},getQueryByName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=o.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},showDialog:function(t){this.dialogMsg=t,this.dialogVisible=!0},getActivityInfo:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,i,a,n,r,s,c,l,p,d,u,g,m,f,b,h,w,v,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.btnLoading=!0,o=window,i=o.cloudResource,a=void 0===i?{}:i,n=a.envID,e.prev=3,r=t.getQueryByName("activityId"),s=t.getQueryByName("source")||"_cms_sms_",c=localStorage.getItem(R),c||(c=t.uuidv4(),localStorage.setItem(R,c)),l="wx-ext-cms-sms",e.next=11,t.cloudApp.callFunction({name:l,data:{channelId:s,sessionId:c,activityId:r,referer:document.referrer,action:"getUrlScheme"}});case 11:if(p=e.sent,d=p.result,!d.error){e.next=17;break}return t.generateSchemaError=!0,t.showDialog(d.error.message),e.abrupt("return");case 17:t.openlink=p.result.openlink,u=p.result.activity||{},g=u.jumpImg,m=u.isLongImg,f=u.btnImg,b=u.jumpPageType,h=u.lowcodePage,w=u.fromLowCode,t.bgImg=g,t.isLongImg=m,t.btnImg=f,t.jumpPageType=b,t.fromLowCode=w,t.lowcodePage=h,v="",u&&u._id?"boolean"!==typeof u.isActivityOpen||u.isActivityOpen?u.startTime>Date.now()?v="尚未开始":u.endTime<Date.now()&&(v="已结束"):v="未开放":v="不存在",u.appPath&&(x=u.appPath+".html"),x?x+="?_activityId_=".concat(r,"&_source_=").concat(s,"&_envId_=").concat(n):x="?_activityId_=".concat(r,"&_source_=").concat(s,"&_envId=").concat(n),u.appPathQuery&&(x+=u.appPathQuery),console.log("跳转链接",x),x&&(t.appPath=x),v?t.showDialog("当前活动".concat(v,"，更多精彩活动来").concat(a.appName,"看看吧")):t.isWeixin||t.isDesktop||(location.href=t.openlink),e.next=40;break;case 36:e.prev=36,e.t0=e["catch"](3),console.log(e.t0),e.t0.message&&e.t0.message.indexOf("40165")>-1?t.showDialog("页面路径填写错误"):alert(e.t0);case 40:return e.prev=40,t.pageLoading=!1,t.btnLoading=!1,e.finish(40);case 44:case"end":return e.stop()}}),e,null,[[3,36,40,44]])})))()},uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},openWeapp:function(){this.dialogVisible=!1,this.isWeixin||this.generateSchemaError||(this.openlink?location.href=this.openlink:this.getActivityInfo())}}},U=T,$=(o("7c55"),Object(d["a"])(U,a,n,!1,null,null,null)),z=$.exports;i["a"].config.productionTip=!1,i["a"].config.ignoredElements=[/^wx/],console.log("production"),Object({NODE_ENV:"production",BASE_URL:"/cms-activities/"}).VUE_APP_CLOUDRESOURCE,new i["a"]({render:function(t){return t(z)}}).$mount("#app")},5816:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,"#btnImg[data-v-1894d178]{position:fixed;left:0;right:0;bottom:0;z-index:1}#btnImg[data-v-1894d178],.bottom[data-v-1894d178]{width:100%}.bottom .weui-btn[data-v-1894d178]{width:100%;height:3rem;border-radius:0;font-size:18px;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}",""]),t.exports=e},"643d":function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,"#loading .weui-primary-loading{height:48px;width:48px}#loading .weui-primary-loading:after,#loading .weui-primary-loading:before{border:3px solid}#loading .weui-primary-loading:before{border-right-width:0;width:24px;height:48px;border-top-left-radius:48px;border-bottom-left-radius:48px}#loading .weui-primary-loading:after{width:24px;height:48px;border-left-width:0;border-top-right-radius:48px;border-bottom-right-radius:48px}#loading p{margin-top:1rem}",""]),t.exports=e},"6a06":function(t,e,o){"use strict";o("32f1")},"7c55":function(t,e,o){"use strict";o("bc9f")},"7d79":function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,'#app{position:relative;text-align:center;color:#2c3e50;height:calc(100% - constant(safe-area-inset-bottom));height:calc(100% - env(safe-area-inset-bottom));font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}#app.long{overflow:auto}body,html{height:100%;margin:0}body{padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}#bgFrame{position:absolute;overflow:auto;left:0;top:0;width:100%;height:100%}img#bgImg,img#bgImg.full{display:block;width:100%}img#bgImg.full{height:calc(100% - constant(safe-area-inset-bottom));height:calc(100% - env(safe-area-inset-bottom));-o-object-fit:cover;object-fit:cover;bottom:constant(safe-area-inset-bottom);bottom:env(safe-area-inset-bottom)}.btn-box.middle{height:100%;width:100%}.btn-box.bottom{position:fixed;width:100%;left:0;right:0;bottom:0;z-index:10}.bottom-box{content:" ";height:3rem;width:100%}.center{height:100%;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}',""]),t.exports=e},9206:function(t,e,o){"use strict";o("3710")},a2d6:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".js_dialog[data-v-169a55ac]{transition:opacity .2s linear 0s}",""]),t.exports=e},bc9f:function(t,e,o){var i=o("7d79");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("97192934",i,!0,{sourceMap:!1,shadowMode:!1})},be90:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".bottom[data-v-07f35509]{position:absolute;bottom:0;left:0;right:0}.bottom p[data-v-07f35509]{margin-bottom:4.5rem}.bottom wx-open-launch-weapp[data-v-07f35509]{position:absolute;bottom:0;left:0;right:0;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}",""]),t.exports=e},e98a:function(t,e,o){"use strict";o("3354")}});